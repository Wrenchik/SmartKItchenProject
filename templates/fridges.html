<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö—É—Ö–Ω–∏ / —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∏</title>
    <style>
        body { font-family: Arial; background: #f4f6f8; padding: 30px; }
        .box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 600px;
            margin: auto;
        }
        input, button {
            width: 100%;
            padding: 8px;
            margin: 6px 0;
            font-size: 14px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover { background: #43a047; }
        ul { padding-left: 20px; }
    </style>
</head>
<body>
<div style="margin-bottom: 20px;">
    <a href="/" style="
        display: inline-block;
        padding: 8px 14px;
        background: #1976d2;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: bold;
    ">
        üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    </a>
</div>
<div class="box">
    <h2>üè† –ö—É—Ö–Ω–∏ / —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∏</h2>

    <input id="owner" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ö–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ö—É—Ö–Ω—è 1 —ç—Ç–∞–∂)">
    <button onclick="createFridge()">–°–æ–∑–¥–∞—Ç—å –∫—É—Ö–Ω—é</button>

    <h3>üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫—É—Ö–Ω–∏</h3>
    <ul id="list"></ul>
</div>

<script>
async function loadFridges() {
    const res = await fetch("/fridges");
    const data = await res.json();
    const ul = document.getElementById("list");
    ul.innerHTML = "";

    if (data.length === 0) {
        ul.innerHTML = "<li>–ö—É—Ö–æ–Ω—å –ø–æ–∫–∞ –Ω–µ—Ç</li>";
        return;
    }

    data.forEach(f => {
        ul.innerHTML += `<li>ID ${f.id} ‚Äî ${f.owner}</li>`;
    });
}

async function createFridge() {
    if (!owner.value) {
        alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ö–Ω–∏");
        return;
    }

    await fetch("/fridges", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ owner: owner.value })
    });

    owner.value = "";
    loadFridges();
}

loadFridges();
</script>

</body>
</html>
